{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block title %}{% trans 'TravelAcrossEU Dashboard' %} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block extrahead %}{{ block.super }}
<style>
    /* Global Light Theme Override for All Admin Pages */
    body {
        background: #f8f9fa !important;
    }
    
    #container {
        background: #f8f9fa !important;
        min-height: 100vh;
    }
    
    #content {
        background: #f8f9fa !important;
    }
    
    #content-main {
        background: #f8f9fa !important;
    }
    
    .breadcrumbs {
        background: #ffffff !important;
        border-bottom: 1px solid #e0e0e0 !important;
        border-radius: 0 !important;
    }
    
    #header {
        background: #ffffff !important;
        border-bottom: 1px solid #e0e0e0 !important;
    }
    
    #branding h1, #branding h1 a:link, #branding h1 a:visited {
        color: #343a40 !important;
    }
    
    #user-tools a {
        color: #007bff !important;
    }
    
    #user-tools a:hover {
        color: #0056b3 !important;
    }
    
    /* Form and table styling */
    .module {
        background: #ffffff !important;
        border: 1px solid #e0e0e0 !important;
        border-radius: 8px !important;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05) !important;
    }
    
    .module h2, .module caption, .inline-group h2 {
        background: #f8f9fa !important;
        color: #343a40 !important;
        border-bottom: 1px solid #e0e0e0 !important;
    }
    
    table thead th {
        background: #f8f9fa !important;
        color: #343a40 !important;
    }
    
    .submit-row {
        background: #f8f9fa !important;
        border-top: 1px solid #e0e0e0 !important;
    }
    
    .button, input[type=submit], input[type=button], .submit-row input, a.button {
        background: #007bff !important;
        color: white !important;
        border: none !important;
        border-radius: 6px !important;
        padding: 8px 16px !important;
        font-weight: 600 !important;
        transition: all 0.2s ease !important;
        text-decoration: none !important;
        box-shadow: 0 2px 4px rgba(0,123,255,0.2) !important;
    }
    
    .button:hover, input[type=submit]:hover, input[type=button]:hover, .submit-row input:hover, a.button:hover {
        background: #0056b3 !important;
        transform: translateY(-1px) !important;
        box-shadow: 0 4px 8px rgba(0,123,255,0.3) !important;
    }
    
    .default {
        background: #28a745 !important;
    }
    
    .default:hover {
        background: #1e7e34 !important;
    }
    
    /* Navigation styling */
    .app-list a {
        color: #007bff !important;
    }
    
    .app-list a:hover {
        color: #0056b3 !important;
    }
    
    .model-list a {
        color: #6c757d !important;
    }
    
    .model-list a:hover {
        color: #343a40 !important;
    }
    
    .dashboard-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }
    
    .stat-card {
        background: #ffffff;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        transition: box-shadow 0.2s ease;
    }
    
    .stat-card:hover {
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .stat-card h3 {
        margin-top: 0;
        color: #343a40;
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 15px;
    }
    
    .stat-item {
        display: flex;
        justify-content: space-between;
        margin: 10px 0;
        font-size: 14px;
        color: #495057;
        font-weight: 500;
    }
    
    .stat-number {
        font-weight: 700;
        color: #212529;
    }
    
    .translation-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
        margin: 15px 0;
    }
    
    .locale-card {
        background: #ffffff;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 16px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    
    .locale-title {
        font-weight: 600;
        color: #343a40;
        margin-bottom: 10px;
        font-size: 15px;
    }
    
    .coverage-item {
        font-size: 13px;
        margin: 6px 0;
        color: #495057;
        font-weight: 500;
    }
    
    .coverage-bar {
        background: #e9ecef;
        height: 8px;
        border-radius: 4px;
        overflow: hidden;
        margin: 2px 0;
    }
    
    .coverage-fill {
        height: 100%;
        background: #28a745;
        transition: width 0.3s ease;
    }
    
    .coverage-fill.medium { background: #ffc107; }
    .coverage-fill.low { background: #dc3545; }
    
    .quick-actions {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 10px;
        margin: 20px 0;
    }
    
    .action-link {
        display: block;
        padding: 12px 16px;
        background: #007bff;
        color: white;
        text-decoration: none;
        border-radius: 8px;
        text-align: center;
        font-size: 14px;
        font-weight: 600;
        transition: all 0.2s ease;
        box-shadow: 0 2px 4px rgba(0,123,255,0.2);
    }
    
    .action-link:hover {
        background: #0056b3;
        color: white;
        text-decoration: none;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0,123,255,0.3);
    }
    
    .recent-activity {
        background: #ffffff;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .recent-list {
        list-style: none;
        padding: 0;
        margin: 10px 0;
    }
    
    .recent-item {
        padding: 8px 0;
        border-bottom: 1px solid #e9ecef;
        font-size: 13px;
        color: #495057;
        font-weight: 500;
    }
    
    .recent-item:last-child {
        border-bottom: none;
    }
    
    .recent-link {
        color: #007bff;
        text-decoration: none;
        font-weight: 600;
    }
    
    .recent-link:hover {
        color: #0056b3;
        text-decoration: underline;
    }
    
    .section-title {
        color: #343a40;
        font-weight: 600;
        font-size: 20px;
        margin: 25px 0 15px 0;
        border-bottom: 2px solid #007bff;
        padding-bottom: 8px;
    }
    
    .dashboard-section {
        margin-bottom: 30px;
    }
</style>
{% endblock %}

{% block content %}
<h1 style="color: #343a40; font-weight: 600; margin-bottom: 25px; font-size: 28px;">{% trans 'TravelAcrossEU Dashboard' %}</h1>

<div class="dashboard-stats">
    <!-- Content Statistics -->
    <div class="stat-card">
        <h3>{% trans 'Pages' %}</h3>
        <div class="stat-item">
            <span>{% trans 'Total Pages' %}:</span>
            <span class="stat-number">{{ content_stats.pages.total }}</span>
        </div>
        <div class="stat-item">
            <span>{% trans 'Published' %}:</span>
            <span class="stat-number">{{ content_stats.pages.published }}</span>
        </div>
        <div class="stat-item">
            <span>{% trans 'Translations' %}:</span>
            <span class="stat-number">{{ content_stats.pages.translations }}</span>
        </div>
        <div class="stat-item">
            <span>{% trans 'Sections' %}:</span>
            <span class="stat-number">{{ content_stats.pages.sections }}</span>
        </div>
    </div>

    <div class="stat-card">
        <h3>{% trans 'Destinations' %}</h3>
        <div class="stat-item">
            <span>{% trans 'Countries' %}:</span>
            <span class="stat-number">{{ content_stats.destinations.countries_published }}/{{ content_stats.destinations.countries }}</span>
        </div>
        <div class="stat-item">
            <span>{% trans 'Cities' %}:</span>
            <span class="stat-number">{{ content_stats.destinations.cities_published }}/{{ content_stats.destinations.cities }}</span>
        </div>
        <div class="stat-item">
            <span>{% trans 'Destinations' %}:</span>
            <span class="stat-number">{{ content_stats.destinations.destinations_published }}/{{ content_stats.destinations.destinations }}</span>
        </div>
        <div class="stat-item">
            <span>{% trans 'Translations' %}:</span>
            <span class="stat-number">{{ content_stats.destinations.translations }}</span>
        </div>
        <div class="stat-item">
            <span>{% trans 'Sections' %}:</span>
            <span class="stat-number">{{ content_stats.destinations.sections }}</span>
        </div>
    </div>

    <div class="stat-card">
        <h3>{% trans 'Blog' %}</h3>
        <div class="stat-item">
            <span>{% trans 'Categories' %}:</span>
            <span class="stat-number">{{ content_stats.blog.categories_published }}/{{ content_stats.blog.categories }}</span>
        </div>
        <div class="stat-item">
            <span>{% trans 'Posts' %}:</span>
            <span class="stat-number">{{ content_stats.blog.posts_published }}/{{ content_stats.blog.posts }}</span>
        </div>
        <div class="stat-item">
            <span>{% trans 'Translations' %}:</span>
            <span class="stat-number">{{ content_stats.blog.translations }}</span>
        </div>
        <div class="stat-item">
            <span>{% trans 'Sections' %}:</span>
            <span class="stat-number">{{ content_stats.blog.sections }}</span>
        </div>
    </div>
</div>

<!-- Translation Coverage -->
<div class="dashboard-section">
    <h2 class="section-title">{% trans 'Translation Coverage' %}</h2>
</div>
<div class="translation-grid">
    {% for locale in translation_coverage %}
    <div class="locale-card">
        <div class="locale-title">{{ locale.locale_name }} ({{ locale.locale_code|upper }})</div>
        
        <div class="coverage-item">
            {% trans 'Pages' %}: {{ locale.pages.translated }}/{{ locale.pages.total }} ({{ locale.pages.percentage }}%)
            <div class="coverage-bar">
                <div class="coverage-fill {% if locale.pages.percentage >= 80 %}{% elif locale.pages.percentage >= 50 %}medium{% else %}low{% endif %}" 
                     style="width: {{ locale.pages.percentage }}%"></div>
            </div>
        </div>
        
        <div class="coverage-item">
            {% trans 'Blog Posts' %}: {{ locale.blog_posts.translated }}/{{ locale.blog_posts.total }} ({{ locale.blog_posts.percentage }}%)
            <div class="coverage-bar">
                <div class="coverage-fill {% if locale.blog_posts.percentage >= 80 %}{% elif locale.blog_posts.percentage >= 50 %}medium{% else %}low{% endif %}" 
                     style="width: {{ locale.blog_posts.percentage }}%"></div>
            </div>
        </div>
        
        <div class="coverage-item">
            {% trans 'Destinations' %}: {{ locale.destinations.translated }}/{{ locale.destinations.total }} ({{ locale.destinations.percentage }}%)
            <div class="coverage-bar">
                <div class="coverage-fill {% if locale.destinations.percentage >= 80 %}{% elif locale.destinations.percentage >= 50 %}medium{% else %}low{% endif %}" 
                     style="width: {{ locale.destinations.percentage }}%"></div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<!-- Quick Actions -->
<div class="dashboard-section">
    <h2 class="section-title">{% trans 'Quick Actions' %}</h2>
</div>
<div class="dashboard-section">
    <h2 class="section-title">{% trans 'Quick Actions' %}</h2>
</div>
<div class="quick-actions">
    <a href="{% url 'admin:cms_page_add' %}" class="action-link">{% trans 'Add Page' %}</a>
    <a href="{% url 'admin:cms_country_add' %}" class="action-link">{% trans 'Add Country' %}</a>
    <a href="{% url 'admin:cms_city_add' %}" class="action-link">{% trans 'Add City' %}</a>
    <a href="{% url 'admin:cms_destination_add' %}" class="action-link">{% trans 'Add Destination' %}</a>
    <a href="{% url 'admin:cms_blogcategory_add' %}" class="action-link">{% trans 'Add Blog Category' %}</a>
    <a href="{% url 'admin:cms_blogpost_add' %}" class="action-link">{% trans 'Add Blog Post' %}</a>
    <a href="{% url 'admin:cms_navigationmenuitem_changelist' %}" class="action-link">üß≠ {% trans 'Navigation Menu' %}</a>
    <a href="{% url 'admin:cms_footerblock_changelist' %}" class="action-link">üìÑ {% trans 'Footer Blocks' %}</a>
    <a href="{% url 'media_library' %}" class="action-link">üìÅ {% trans 'Media Library' %}</a>
    <a href="{% url 'admin:cms_mediafile_add' %}" class="action-link">üì§ {% trans 'Upload Media' %}</a>
    <a href="{% url 'admin:cms_pagetranslation_changelist' %}" class="action-link">{% trans 'View All Translations' %}</a>
    <a href="{% url 'admin:app_list' app_label='cms' %}" class="action-link">{% trans 'All CMS Models' %}</a>
</div>

<!-- Recent Activity -->
<div class="dashboard-section">
    <h2 class="section-title">{% trans 'Recent Activity' %}</h2>
</div>
<div class="recent-activity">
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
        <div>
            <h4>{% trans 'Recent Pages' %}</h4>
            <ul class="recent-list">
                {% for page in recent_activity.pages %}
                <li class="recent-item">
                    <a href="{% url 'admin:cms_page_change' page.id %}" class="recent-link">{{ page.slug }}</a>
                    <br><small>{{ page.updated_at|date:"M d, H:i" }}</small>
                </li>
                {% empty %}
                <li class="recent-item">{% trans 'No pages yet' %}</li>
                {% endfor %}
            </ul>
        </div>
        
        <div>
            <h4>{% trans 'Recent Blog Posts' %}</h4>
            <ul class="recent-list">
                {% for post in recent_activity.blog_posts %}
                <li class="recent-item">
                    <a href="{% url 'admin:cms_blogpost_change' post.id %}" class="recent-link">{{ post.slug }}</a>
                    <br><small>{{ post.updated_at|date:"M d, H:i" }}</small>
                </li>
                {% empty %}
                <li class="recent-item">{% trans 'No blog posts yet' %}</li>
                {% endfor %}
            </ul>
        </div>
        
        <div>
            <h4>{% trans 'Recent Destinations' %}</h4>
            <ul class="recent-list">
                {% for destination in recent_activity.destinations %}
                <li class="recent-item">
                    <a href="{% url 'admin:cms_destination_change' destination.id %}" class="recent-link">{{ destination.slug }}</a>
                    <br><small>{{ destination.updated_at|date:"M d, H:i" }}</small>
                </li>
                {% empty %}
                <li class="recent-item">{% trans 'No destinations yet' %}</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>

{% endblock %}